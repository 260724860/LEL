webpackJsonp([10],{"2kxg":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),o=n.n(r),a=n("exGp"),i=n.n(a),s=n("Dd8w"),c=n.n(s),u=n("NYxO"),l={name:"MyShoppingCart",data:function(){return{columns:[{type:"selection",width:50,align:"center"},{title:"图片",key:"GoodsImg",width:80,render:function(t,e){return t("div",[t("img",{attrs:{src:e.row.GoodsImg,width:40,height:40}})])},align:"center"},{type:"html",title:"条码",width:250,key:"SerialNumber",align:"center"},{title:"商品",key:"GoodsName",align:"center"},{title:"属性",width:300,key:"specs",align:"center"},{title:"数量",width:150,slot:"count",align:"center"},{title:"金额",width:150,key:"Price",align:"center"},{title:"小计",width:150,key:"totalPrice",align:"center"},{title:"操作",width:150,slot:"readMore",align:"center"}],selectData:[]}},computed:c()({},Object(u.d)(["shoppingCart"]),{totalCount:{get:function(){var t=0;return this.shoppingCart.forEach(function(e){t+=e.GoodsCount}),t}},totalPrice:{get:function(){var t=0;return this.shoppingCart.forEach(function(e){t+=e.GoodsCount*e.Price}),t}}}),created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadShoppingCart();case 2:case"end":return e.stop()}},e,t)}))()},methods:c()({},Object(u.b)(["loadShoppingCart"]),{deleteSelect:function(){var t,e=this;this.$Modal.confirm({title:"购物车",content:"确认删除选中的商品？",onOk:(t=i()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.selectData.forEach(function(t){n.push(t.CartID)}),t.next=4,e.$request.deleteCart(n);case 4:if(!t.sent){t.next=9;break}return e.$Message.info("删除成功"),t.next=9,e.loadShoppingCart();case 9:case"end":return t.stop()}},t,e)})),function(){return t.apply(this,arguments)}),onCancel:function(){}})},goTo:function(){this.$router.push("/order")},remove:function(t){var e,n=this;this.$Modal.confirm({title:"购物车",content:"确认删除此商品？",onOk:(e=i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$request.deleteCart([n.shoppingCart[t].CartID]);case 2:if(!e.sent){e.next=7;break}return n.$Message.info("删除成功"),e.next=7,n.loadShoppingCart();case 7:case"end":return e.stop()}},e,n)})),function(){return e.apply(this,arguments)}),onCancel:function(){}})},handleChange:function(t,e,n){var r=this;this.$nextTick(i()(o.a.mark(function n(){var a,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(a=t)||(a=1),r.shoppingCart[e].GoodsCount=a,r.shoppingCart[e].totalPrice=a*r.shoppingCart[e].Price,i=[],r.shoppingCart[e].GoodsValueList.forEach(function(t){var e={CategoryType:t.CategoryType,GoodsValueID:t.GoodsValueID};i.push(e)}),n.next=8,r.$request.updateCartCount(r.shoppingCart[e].GoodsID,r.shoppingCart[e].GoodsCount,i);case 8:case"end":return n.stop()}},n,r)})))},selectChange:function(t){this.selectData=t}})},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.shoppingCart,size:"large","no-data-text":"您的购物车没有商品，请先添加商品到购物车"},on:{"on-selection-change":t.selectChange},scopedSlots:t._u([{key:"count",fn:function(e){e.row;var r=e.index;return[n("InputNumber",{attrs:{min:1,max:-1!==t.shoppingCart[r].Quota?t.shoppingCart[r].Quota:1e4,precision:0},on:{"on-change":function(e){return t.handleChange(e,r)}},model:{value:t.shoppingCart[r].GoodsCount,callback:function(e){t.$set(t.shoppingCart[r],"GoodsCount",e)},expression:"shoppingCart[index].GoodsCount"}})]}},{key:"readMore",fn:function(e){e.row;var r=e.index;return[n("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(r)}}},[t._v("删除")])]}}])}),t._v(" "),n("div",{staticClass:"go-to"},[n("span",{staticStyle:{"font-size":"16px","margin-right":"30px"}},[t._v("商品总量："+t._s(t.totalCount))]),t._v(" "),n("span",{staticStyle:{"font-size":"16px"}},[t._v("商品总价：￥"+t._s(t.totalPrice))])]),t._v(" "),n("div",{staticClass:"go-to"},[n("Button",{staticStyle:{"margin-right":"30px"},attrs:{disabled:!t.selectData.length,type:"error"},on:{click:t.deleteSelect}},[t._v("删除选中")]),t._v(" "),n("Button",{attrs:{disabled:!t.shoppingCart.length,type:"primary"},on:{click:t.goTo}},[t._v("去下单")])],1)],1)},staticRenderFns:[]};var d=n("VU/8")(l,p,!1,function(t){n("Gr2S")},"data-v-b6a60b5c",null);e.default=d.exports},Gr2S:function(t,e){}});
//# sourceMappingURL=10.38fc132ff7d5b2c77d4b.js.map