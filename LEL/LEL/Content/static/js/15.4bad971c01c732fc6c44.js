webpackJsonp([15],{HZBm:function(e,s){},tzhQ:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a("mvHQ"),r=a.n(t),i=a("Xxa5"),n=a.n(i),c=a("exGp"),o=a.n(c),u=a("Dd8w"),l=a.n(u),g=a("NYxO"),p={name:"MyScan",data:function(){return{isVerified:!1,dialogImageUrl:"",dialogVisible:!1,allowType:["gif","jpg","bmp","jpeg","png"],UsersImage:null,UsersIDImgA:null,UsersIDImgB:null,UsersBusinessImg:null,imgBase:null,UsersImageOrigin:null,UsersIDImgAOrigin:null,UsersIDImgBOrigin:null,UsersBusinessImgOrigin:null}},computed:l()({},Object(g.d)(["userInfo","sysConfig"])),mounted:function(){var e=this;return o()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.loadSysConfig();case 2:e.imgBase=e.sysConfig.content.ShopDomain.Value,e.userInfo.accattach.HeadImage&&(e.UsersImage=e.imgBase+e.userInfo.accattach.HeadImage),e.userInfo.accattach.IDImgA&&(e.UsersIDImgA=e.imgBase+e.userInfo.accattach.IDImgA),e.userInfo.accattach.IDImgB&&(e.UsersIDImgB=e.imgBase+e.userInfo.accattach.IDImgB),e.userInfo.accattach.BusinessImg&&(e.UsersBusinessImg=e.imgBase+e.userInfo.accattach.BusinessImg),e.isVerified=1===e.userInfo.accattach.status;case 8:case"end":return s.stop()}},s,e)}))()},methods:l()({},Object(g.b)(["loadSysConfig"]),Object(g.c)(["SET_USER_LOGIN_INFO"]),{beforeUpload:function(e){var s=!1;this.allowType.forEach(function(a){s=s||e.type==="image/"+a});var a=e.size/1024/1024<2;return s?a||this.$Message.error("上传图片大小不能超过2MB，请重试"):this.$Message.error("只支持gif,jpg,bmp,jpeg,png格式图片，请重试"),s&&a},uploadUsersImage:function(e){var s=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.uploadImg(e,"UsersImage");case 2:case"end":return a.stop()}},a,s)}))()},uploadUsersIDImgA:function(e){var s=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.uploadImg(e,"UsersIDImgA");case 2:case"end":return a.stop()}},a,s)}))()},uploadUsersIDImgB:function(e){var s=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.uploadImg(e,"UsersIDImgB");case 2:case"end":return a.stop()}},a,s)}))()},uploadUsersBusinessImg:function(e){var s=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.uploadImg(e,"UsersBusinessImg");case 2:case"end":return a.stop()}},a,s)}))()},uploadImg:function(e,s){var a=this;return o()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$request.uploadImg(e.file);case 2:(r=t.sent)?(a.$Message.success("上传成功"),a[""+s]=a.imgBase+r.content,a[s+"Origin"]=r.content):a.$Message.error("上传失败");case 4:case"end":return t.stop()}},t,a)}))()},submitUpdate:function(){var e=this;return o()(n.a.mark(function s(){var a,t;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(a=(a=JSON.parse(localStorage.getItem("userInfo"))).accattach).Code="",a.Msg="",a.HeadImage=e.UsersImageOrigin,a.IDImgA=e.UsersIDImgAOrigin,a.IDImgB=e.UsersIDImgBOrigin,a.BusinessImg=e.UsersBusinessImgOrigin,s.next=10,e.$request.updateUserInfo(a);case 10:s.sent?((t=e.userInfo).accattach=a,e.SET_USER_LOGIN_INFO(t),localStorage.setItem("userInfo",r()(t)),e.$Message.success("提交成功")):e.$Message.error("提交失败");case 12:case"end":return s.stop()}},s,e)}))()}})},I={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",[a("div",{staticClass:"imgBox"},[a("p",{staticClass:"title"},[e._v("店铺门头照")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,disabled:e.isVerified,accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PNG,.GIF,.BMP","http-request":e.uploadUsersImage,"before-upload":e.beforeUpload}},[e.UsersImage?a("img",{staticClass:"avatar",attrs:{src:e.UsersImage}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("div",{staticClass:"imgBox"},[a("p",{staticClass:"title"},[e._v("身份证正面")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,disabled:e.isVerified,accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PNG,.GIF,.BMP","http-request":e.uploadUsersIDImgA,"before-upload":e.beforeUpload}},[e.UsersIDImgA?a("img",{staticClass:"avatar",attrs:{src:e.UsersIDImgA}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("div",{staticClass:"imgBox"},[a("p",{staticClass:"title"},[e._v("身份证反面")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,disabled:e.isVerified,accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PNG,.GIF,.BMP","http-request":e.uploadUsersIDImgB,"before-upload":e.beforeUpload}},[e.UsersIDImgB?a("img",{staticClass:"avatar",attrs:{src:e.UsersIDImgB}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("div",{staticClass:"imgBox"},[a("p",{staticClass:"title"},[e._v("营业执照")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,disabled:e.isVerified,accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PNG,.GIF,.BMP","http-request":e.uploadUsersBusinessImg,"before-upload":e.beforeUpload}},[e.UsersBusinessImg?a("img",{staticClass:"avatar",attrs:{src:e.UsersBusinessImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("div",{staticStyle:{clear:"both"}}),e._v(" "),e.isVerified?e._e():a("el-button",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpdate}},[e._v("提交审核")]),e._v(" "),e.isVerified?e._e():a("div",{staticStyle:{"margin-top":"20px"}},[a("span",[e._v("提交审核资料后请于左侧填写基本信息")])])],1)},staticRenderFns:[]};var m=a("VU/8")(p,I,!1,function(e){a("HZBm")},"data-v-31ed94e7",null);s.default=m.exports}});
//# sourceMappingURL=15.4bad971c01c732fc6c44.js.map