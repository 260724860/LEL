webpackJsonp([17],{"7lGL":function(e,t){},QfwR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),o=r("exGp"),n=r.n(o),i=(r("NYxO"),{name:"RetrievePassword",data:function(){var e=this;return{formValidate:{phone:"",checkNum:"",password:"",rePassword:""},ruleValidate:{phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{type:"string",pattern:/^1[3|4|5|7|8|9][0-9]{9}$/,message:"手机号格式出错",trigger:"blur"}],checkNum:[{required:!0,message:"必须填写验证码",trigger:"blur"},{type:"string",min:6,max:6,message:"验证码长度错误",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6",trigger:"blur"}],rePassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,r,a){r!==e.formValidate.password?a(new Error("两次输入的密码不一样")):a()},trigger:"blur"}]},checkNumSent:!1,time:60}},mounted:function(){},methods:{countDown:function(){var e=this;this.time>0?setTimeout(function(){e.time--,e.countDown()},1e3):(this.time=60,this.checkNumSent=!1)},getCheckNum:function(){var e=this;return n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(11!==e.formValidate.phone.length){t.next=7;break}return t.next=3,e.$request.sendSms(e.formValidate.phone);case 3:t.sent?(e.$Message.success({content:"验证码已发送",duration:3,closable:!0}),e.checkNumSent=!0,e.countDown()):e.$Message.error({content:"验证码发送失败",duration:3,closable:!0}),t.next=8;break;case 7:e.$Message.error({content:"请输入正确的手机号",duration:3,closable:!0});case 8:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(){var e,t=this;this.$refs.formData.validate((e=n()(s.a.mark(function e(r){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return e.next=3,t.$request.checkCode(t.formValidate.phone,t.formValidate.checkNum);case 3:if(!e.sent){e.next=11;break}return e.next=7,t.$request.retrievePassword(t.formValidate.phone,t.formValidate.password);case 7:e.sent?(t.$Message.success("重置密码成功"),t.$router.push("/login")):t.$Message.error("重置密码失败，请重试！"),e.next=12;break;case 11:t.$Message.error({content:"验证码错误",duration:3,closable:!0});case 12:e.next=15;break;case 14:t.$Message.error({content:"请填写正确的信息",duration:3,closable:!0});case 15:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}}),l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[e._m(0),e._v(" "),r("div",{staticClass:"form-box"},[r("Form",{ref:"formData",attrs:{model:e.formValidate,rules:e.ruleValidate}},[r("FormItem",{attrs:{prop:"phone"}},[r("i-input",{attrs:{clearable:"",size:"large",placeholder:"请输入手机号"},model:{value:e.formValidate.phone,callback:function(t){e.$set(e.formValidate,"phone",t)},expression:"formValidate.phone"}},[r("Icon",{attrs:{slot:"prepend",type:"md-phone-portrait"},slot:"prepend"})],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"checkNum"}},[r("i-input",{attrs:{size:"large",placeholder:"请输入验证码"},model:{value:e.formValidate.checkNum,callback:function(t){e.$set(e.formValidate,"checkNum",t)},expression:"formValidate.checkNum"}},[r("Icon",{attrs:{slot:"prepend",type:"md-checkmark-circle-outline"},slot:"prepend"}),e._v(" "),e.checkNumSent?r("Button",{attrs:{slot:"append",disabled:""},slot:"append"},[e._v("重新发送 ("+e._s(e.time)+"s)")]):r("Button",{attrs:{slot:"append"},on:{click:e.getCheckNum},slot:"append"},[e._v("获取验证码")])],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"password"}},[r("i-input",{attrs:{type:"password",clearable:"",size:"large",placeholder:"请输入你的密码"},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}},[r("Icon",{attrs:{slot:"prepend",type:"md-lock"},slot:"prepend"})],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"rePassword"}},[r("i-input",{attrs:{type:"password",clearable:"",size:"large",placeholder:"请再次输入你的密码"},model:{value:e.formValidate.rePassword,callback:function(t){e.$set(e.formValidate,"rePassword",t)},expression:"formValidate.rePassword"}},[r("Icon",{attrs:{slot:"prepend",type:"md-unlock"},slot:"prepend"})],1)],1),e._v(" "),r("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.handleSubmit}},[e._v("重置密码")])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-header"},[t("p",[this._v("重置密码")])])}]};var c=r("VU/8")(i,l,!1,function(e){r("7lGL")},"data-v-06035f9d",null);t.default=c.exports}});
//# sourceMappingURL=17.828e0bbae9cb358ba6ab.js.map