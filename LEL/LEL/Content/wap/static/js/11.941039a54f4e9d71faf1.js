webpackJsonp([11],{VIOL:function(e,t){},pigT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),s=r("exGp"),o=r.n(s),i=r("Dd8w"),c=r.n(i),d=r("Fd2+"),l=r("1bjU"),u=r("NYxO"),p={name:"OrderList",components:{headerNav:l.a},data:function(){return{canCancel:!1,orderList:[],orderType:"",pageID:0,loading:!1,finished:!1}},computed:c()({},Object(u.d)(["orderResult","userInfo"])),mounted:function(){switch(this.canCancel=0===parseInt(this.$route.query.type),parseInt(this.$route.query.type)){case 0:this.orderType="未处理";break;case 1:this.orderType="已完成";break;case 2:this.orderType="已处理";break;case 3:this.orderType="待接单";break;case 4:this.orderType="已接单";break;case 5:this.orderType="已取消"}},methods:c()({},Object(u.b)(["loadOrderResult"]),{onCancelClick:function(e){var t=this;d.c.confirm({title:"订单",message:"确定取消这个订单？"}).then(o()(a.a.mark(function r(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$request.cancelOrder(t.orderList[e].Out_Trade_No);case 2:r.sent&&(t.pageID=0,window.scrollTo(0,0),t.orderList=[],t.finished=!1,t.$Message.success("取消订单成功"));case 4:case"end":return r.stop()}},r,t)}))).catch(function(){t.$Message.info("订单未取消")})},onLoad:function(){var e=this;return o()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadOrderResult([e.pageID,e.$route.query.type,e.userInfo.accattach.UserID]);case 2:e.pageID++,r=Math.ceil(e.orderResult.accattach/10),e.finished=e.pageID>=r,e.orderList=e.orderList.concat(e.orderResult.content),e.loading=!1;case 7:case"end":return t.stop()}},t,e)}))()}})},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{background:"#ffffff"}},[r("headerNav",{attrs:{title:e.orderType+"订单列表"}}),e._v(" "),0===e.orderList.length?r("div",{staticClass:"product-not-found-container"},[e._m(0),e._v(" "),r("div",{staticClass:"product-not-found-txt"},[e._v("未查询到相关订单")])]):e._e(),e._v(" "),r("van-list",{attrs:{finished:e.finished,"finished-text":""},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.orderList,function(t,n){return r("div",{key:n},[r("van-cell-group",{staticClass:"order-item"},[r("van-panel",{attrs:{title:t.Out_Trade_No,status:t.OrderType}},[r("van-card",{staticStyle:{background:"#fff"}},[r("template",{slot:"thumb"}),e._v(" "),r("template",{slot:"title"},[r("router-link",{attrs:{to:"/orderDetail?index="+n}},[r("p",{staticStyle:{"font-size":"16px","margin-top":"10px"}},[r("span",[e._v(e._s(t.title))])])])],1),e._v(" "),r("template",{slot:"desc"},[r("router-link",{attrs:{to:"/orderDetail?index="+n}},[r("p",{staticStyle:{"font-size":"12px",color:"#7c7c7c","margin-top":"10px"}},[r("span",[e._v(e._s(t.CreateTime))])])])],1),e._v(" "),r("template",{slot:"footer"},[r("span",{staticStyle:{color:"red","font-size":"14px","font-weight":"bold"}},[e._v("总价：￥"+e._s(t.Money))]),e._v(" "),e.canCancel?r("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.onCancelClick(n)}}},[e._v("取消\n\t\t\t\t\t\t\t")]):e._e()],1)],2)],1)],1)],1)}),0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"product-not-found-img"},[t("img",{attrs:{src:r("nJow"),width:"30%",height:"30%"}})])}]};var h=r("VU/8")(p,f,!1,function(e){r("VIOL")},null,null);t.default=h.exports}});
//# sourceMappingURL=11.941039a54f4e9d71faf1.js.map