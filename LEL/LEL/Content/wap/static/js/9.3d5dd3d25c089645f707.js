webpackJsonp([9],{NQdn:function(t,s){},kbAj:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("Xxa5"),n=e.n(o),a=e("exGp"),i=e.n(a),r=e("Dd8w"),c=e.n(r),l=e("Fd2+"),u=e("1bjU"),d=e("NYxO"),p={name:"GoodsDetail",components:{headerNav:u.a},data:function(){return{swipeHeight:null,isSkuShow:!1,maxCount:1e4,skuData:{sku:{tree:[],list:[],price:""},goodsInfo:{id:null,title:"",picture:""}},selectString:[],selectIndex:[],specs:["味道","颜色","尺寸"],specString:"",serialNumbers:[],serialString:"",count:1}},computed:c()({},Object(d.d)(["goodsInfo","shoppingCart"])),created:function(){var t=this;return i()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.swipeHeight=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.scrollTo(0,0),s.next=4,t.loadGoodsInfo(t.$route.query.id);case 4:t.skuData.sku.price=t.goodsInfo.SpecialOffer,t.skuData.goodsInfo.id=t.goodsInfo.GoodsID,t.skuData.goodsInfo.title=t.goodsInfo.GoodsName,t.skuData.goodsInfo.picture=t.goodsInfo.Image,t.initSelectString(),t.maxCount=t.goodsInfo.Quota>0?t.goodsInfo.Quota:t.maxCount,t.maxCount=Math.min(t.maxCount,t.goodsInfo.Stock);case 11:case"end":return s.stop()}},s,t)}))()},methods:c()({},Object(d.b)(["loadGoodsInfo","loadShoppingCart"]),{initSelectString:function(){for(var t=0;t<this.goodsInfo.ValuesList.length;t++)this.selectString.push(this.goodsInfo.ValuesList[t][0].GoodsValueName),this.serialNumbers.push(this.goodsInfo.ValuesList[t][0].SerialNumber),this.selectIndex[t]=this.goodsInfo.ValuesList[t][0].GoodsValueID;this.specString=this.selectString.join("-"),this.serialString=this.serialNumbers.join("-")},select:function(t){var s=this;this.goodsInfo.ValuesList[t].forEach(function(e){e.GoodsValueName===s.selectString[t]&&(s.selectIndex[t]=e.GoodsValueID,s.serialNumbers[t]=e.SerialNumber)}),this.specString=this.selectString.join("-"),this.serialString=this.serialNumbers.join("-")},toCart:function(){this.$router.push("/cart")},showSku:function(){this.isSkuShow=!0},onAddCartClick:function(){var t=this;return i()(n.a.mark(function s(){var e,o,a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.loadShoppingCart();case 2:e=t.selectString.join("-"),o=!1,a=0;case 5:if(!(a<t.shoppingCart.length)){s.next=12;break}if(parseInt(t.shoppingCart[a].GoodsID)!==parseInt(t.goodsInfo.goodsID)||t.shoppingCart[a].specs!==e){s.next=9;break}return o=!0,s.abrupt("break",12);case 9:a++,s.next=5;break;case 12:if(!o){s.next=16;break}l.c.confirm({title:"提示",message:"该商品已在购物车中，是否继续添加？"}).then(i()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.addToCart();case 2:case"end":return s.stop()}},s,t)}))).catch(function(){}),s.next=18;break;case 16:return s.next=18,t.addToCart();case 18:case"end":return s.stop()}},s,t)}))()},addToCart:function(){var t=this;return i()(n.a.mark(function s(){var e,o,a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(e=[],o=0;o<t.selectIndex.length;o++)a={CategoryType:o+1,GoodsValueID:t.selectIndex[o]},e.push(a);return s.next=4,t.$request.addCart(t.goodsInfo.goodsID,t.count,e);case 4:s.sent&&t.$Message.success("加入购物车成功"),t.isSkuShow=!1;case 7:case"end":return s.stop()}},s,t)}))()}})},g={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("headerNav",{attrs:{title:"商品详情"}}),t._v(" "),e("van-swipe",{attrs:{autoplay:3e3,height:t.swipeHeight}},t._l(t.goodsInfo.ImgList,function(t,s){return e("van-swipe-item",{key:s},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.Src}})])}),1),t._v(" "),e("van-cell-group",[e("van-cell",[e("span",{staticClass:"goods-price"},[t._v("¥ "+t._s(t.goodsInfo.SpecialOffer))]),t._v(" "),e("span",{staticStyle:{color:"#999999","font-size":"14px"}},[e("s",[t._v("￥"+t._s(t.goodsInfo.OriginalPrice))])]),t._v(" "),e("div",{staticClass:"goods-title"},[t._v(t._s(t.goodsInfo.GoodsName))]),t._v(" "),e("div",{staticClass:"goods-subtit"},[t._v(t._s(t.goodsInfo.Describe))])])],1),t._v(" "),e("van-cell-group",{staticClass:"goods-cell-group"},[e("van-cell",[e("template",{slot:"title"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v("条码")]),t._v(" "),e("span",[t._v(t._s(t.serialString))])])],2),t._v(" "),e("van-cell",[e("template",{slot:"title"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v("规格")]),t._v(" "),e("span",[t._v(t._s(t.goodsInfo.Specifications))])])],2),t._v(" "),e("van-cell",[e("template",{slot:"title"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v("装箱数")]),t._v(" "),e("span",[t._v(t._s(t.goodsInfo.PackingNumber))])])],2),t._v(" "),e("van-cell",[e("template",{slot:"title"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v("整件价")]),t._v(" "),e("span",[t._v("￥"+t._s(t.goodsInfo.singlePrice))])])],2),t._v(" "),e("van-cell",{attrs:{"is-link":""},on:{click:t.showSku}},[e("template",{slot:"title"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v("已选")]),t._v(" "),e("span",[t._v(t._s(t.specString))])])],2)],1),t._v(" "),e("van-goods-action",[e("Badge",{staticStyle:{width:"30%"},attrs:{count:0,"overflow-count":"99",offset:[0,25]}},[e("van-goods-action-mini-btn",{attrs:{icon:"cart"},on:{click:t.toCart}},[t._v("\n\t\t\t\t购物车\n\t\t\t")])],1),t._v(" "),e("van-goods-action-big-btn",{attrs:{primary:""},on:{click:t.showSku}},[t._v("\n\t\t\t加入购物车\n\t\t")])],1),t._v(" "),e("van-sku",{attrs:{sku:t.skuData.sku,goods:t.skuData.goodsInfo,"goods-id":t.skuData.goodsInfo.id,"hide-stock":!0,"hide-quota-text":!0,quota:0,"close-on-click-overlay":!0},on:{"add-cart":t.onAddCartClick},scopedSlots:t._u([{key:"sku-actions",fn:function(s){return[e("div",{staticClass:"van-sku-actions"},[e("van-button",{attrs:{type:"primary",disabled:t.goodsInfo.Stock<=0,"bottom-action":""},on:{click:function(t){return s.skuEventBus.$emit("sku:addCart")}}},[t._v("加入购物车")])],1)]}},{key:"sku-header-price",fn:function(s){return[e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("div",{staticStyle:{color:"red"}},[t._v("￥"+t._s(t.goodsInfo.SpecialOffer))]),t._v(" "),e("div",[-1!==t.goodsInfo.Quota?e("span",{staticStyle:{"margin-right":"10px","font-size":"12px"}},[t._v("限购："+t._s(t.goodsInfo.Quota)+"件")]):t._e(),t._v(" "),e("span",{staticStyle:{"font-size":"12px"}},[t._v("库存："+t._s(t.goodsInfo.Stock)+"件")])])])]}},{key:"sku-group",fn:function(s){return[e("div",{staticClass:"van-sku-group-container"},t._l(t.goodsInfo.ValuesList,function(s,o){return e("div",{key:o,staticClass:"van-sku-row"},[e("div",{staticClass:"item-select-title"},[e("p",[t._v(t._s(t.specs[t.goodsInfo.ValuesList[o][0].CategoryType-1])+"：")])]),t._v(" "),e("div",{staticClass:"item-select-column"},[e("div",{staticClass:"item-select-row"},[e("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(s){return t.select(o)}},model:{value:t.selectString[o],callback:function(s){t.$set(t.selectString,o,s)},expression:"selectString[index]"}},t._l(s,function(t,s){return e("Radio",{key:s,attrs:{label:t.GoodsValueName}})}),1)],1)])])}),0)]}},{key:"sku-stepper",fn:function(s){return[e("div",{staticClass:"van-sku-stepper-stock"},[e("div",{staticClass:"van-sku-stepper-container"},[e("div",{staticClass:"van-sku__stepper-title"},[t._v("购买数量：")]),t._v(" "),e("div",{staticClass:"van-stepper van-sku__stepper"},[e("van-stepper",{attrs:{integer:"",min:1,max:t.maxCount,"input-width":"50px"},model:{value:t.count,callback:function(s){t.count=s},expression:"count"}})],1)])])]}}]),model:{value:t.isSkuShow,callback:function(s){t.isSkuShow=s},expression:"isSkuShow"}})],1)},staticRenderFns:[]};var v=e("VU/8")(p,g,!1,function(t){e("NQdn")},"data-v-784a9329",null);s.default=v.exports}});
//# sourceMappingURL=9.3d5dd3d25c089645f707.js.map