{"version":3,"sources":["webpack:///src/page/order.vue","webpack:///./src/page/order.vue?d129","webpack:///./src/page/order.vue"],"names":["order","name","components","productCard","productcard","headerNav","nav","data","totalPrice","isOrderTypePickerShow","orderTypeString","orderType","isExpressTypePickerShow","expressTypeString","expressType","isAddressPickerShow","addressList","addressIndex","pickUpInfo","phone","CarNumber","date","dateString","time","isDatePickerShow","isTimePickerShow","minDate","minHour","maxHour","notes","computed","extends_default","Object","vuex_esm","totalCount","get","total","this","shoppingCart","forEach","item","GoodsCount","mounted","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","tomorrow","wrap","_context","prev","next","loadShoppingCart","loadAddress","loadSysAddress","initTotalPrice","userInfo","accattach","TrueName","Mobile","sysAddress","Date","getHours","setDate","getDate","stop","methods","_this2","Price","showOrderTypePicker","onOrderTypeChange","picker","value","index","showExpressTypePicker","onExpressTypeChange","address","showAddressPicker","length","$router","push","onAddressSelect","showDatePicker","hideDatePicker","onDateChange","reg","RegExp","toLocaleDateString","replace","selectDateString","todatDateString","tomorrowDateString","showTimePicker","hideTimePicker","onTimeChange","onSubmit","_this3","_callee2","addressId","type","userId","carNumber","pickUpMan","pickUpPhone","pickupTime","_context2","$Message","error","abrupt","AddressID","UserID","$request","saveOrder","sent","$toast","success","duration","message","fail","page_order","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","is-link","on","click","position","model","callback","$$v","expression","columns","default-index","change","_e","staticStyle","height","center","border","_s","list","select","_l","product","key","isOrder","clearable","label","placeholder","$set","min-date","confirm","cancel","min-hour","max-hour","autosize","background-color","price","button-text","submit","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.4a9069ed82809682a818.js","sourcesContent":["<template>\n\t<div class=\"order\">\n\t\t<headerNav title=\"确认订单\"/>\n\n\t\t<van-cell-group>\n\t\t\t<van-cell title=\"订单类型\" :value=\"orderTypeString[orderType]\" is-link @click=\"showOrderTypePicker\"/>\n\t\t\t<van-popup v-model=\"isOrderTypePickerShow\" position=\"bottom\">\n\t\t\t\t<van-picker\n\t\t\t\t\t\t:columns=\"orderTypeString\"\n\t\t\t\t\t\t:default-index=\"orderType\"\n\t\t\t\t\t\t@change=\"onOrderTypeChange\"\n\t\t\t\t/>\n\t\t\t</van-popup>\n\n\t\t\t<van-cell v-if=\"orderType === 0\" title=\"取货方式\" :value=\"expressTypeString[expressType]\" is-link @click=\"showExpressTypePicker\"/>\n\t\t\t<van-popup v-model=\"isExpressTypePickerShow\" position=\"bottom\">\n\t\t\t\t<van-picker\n\t\t\t\t\t\t:columns=\"expressTypeString\"\n\t\t\t\t\t\t:default-index=\"expressType\"\n\t\t\t\t\t\t@change=\"onExpressTypeChange\"\n\t\t\t\t/>\n\t\t\t</van-popup>\n\t\t</van-cell-group>\n\t\t<div style=\"height:5px;\"></div>\n\n\t\t<van-cell\n\t\t\t\tcenter\n\t\t\t\t:border=\"false\"\n\t\t\t\tclass=\"contact-card\"\n\t\t\t\tis-link\n\t\t\t\t@click=\"showAddressPicker\"\n\t\t>\n\t\t\t<template v-if=\"addressList.length === 0\">\n\t\t\t\t<strong>暂无收货地址，点我去添加</strong>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<strong>{{`${addressList[addressIndex].name} ${addressList[addressIndex].tel}`}}</strong>\n\t\t\t\t<div>{{addressList[addressIndex].address}}</div>\n\t\t\t</template>\n\t\t</van-cell>\n\t\t<van-popup v-model=\"isAddressPickerShow\" position=\"bottom\">\n\t\t\t<van-address-list\n\t\t\t\t\tclass=\"hideSelect\"\n\t\t\t\t\t:list=\"addressList\"\n\t\t\t\t\t@select=\"onAddressSelect\"\n\t\t\t/>\n\t\t</van-popup>\n\t\t<div style=\"height:7px;\"></div>\n\n\t\t<van-cell title=\"商品总量\" :value=\"totalCount\"/>\n\t\t<div class=\"card\" v-for=\"(product, index) in shoppingCart\" :key=\"index\">\n\t\t\t<product-card :product='product' :isOrder=\"true\"/>\n\t\t</div>\n\t\t<div style=\"height:5px;\"></div>\n\n\t\t<van-cell-group v-if=\"orderType === 0 && expressType === 0\">\n\t\t\t<van-field v-model=\"pickUpInfo.name\" clearable label=\"取货人\" placeholder=\"请输入取货人姓名\"/>\n\t\t\t<van-field v-model=\"pickUpInfo.phone\" clearable label=\"联系电话\" placeholder=\"请输入联系电话\"/>\n\t\t\t<van-field v-model=\"pickUpInfo.CarNumber\" clearable label=\"取货车牌\" placeholder=\"请输入取货车牌号\"/>\n\n\t\t\t<van-cell title=\"取货日期\" :value=\"pickUpInfo.dateString\" is-link @click=\"showDatePicker\"/>\n\t\t\t<van-popup v-model=\"isDatePickerShow\" position=\"bottom\">\n\t\t\t\t<van-datetime-picker type=\"date\" :min-date=\"minDate\" @confirm=\"onDateChange\" @cancel=\"hideDatePicker\"/>\n\t\t\t</van-popup>\n\n\t\t\t<template v-if=\"pickUpInfo.date\">\n\t\t\t\t<van-cell title=\"取货时间\" :value=\"pickUpInfo.time\" is-link @click=\"showTimePicker\"/>\n\t\t\t\t<van-popup v-model=\"isTimePickerShow\" position=\"bottom\">\n\t\t\t\t\t<van-datetime-picker type=\"time\" :min-hour=\"minHour\" :max-hour=\"maxHour\" @confirm=\"onTimeChange\" @cancel=\"hideTimePicker\"/>\n\t\t\t\t</van-popup>\n\t\t\t</template>\n\t\t</van-cell-group>\n\t\t<div style=\"height:5px;\"></div>\n\n\t\t<van-cell-group>\n\t\t\t<van-field v-model=\"notes\" label=\"备注\" type=\"textarea\" placeholder=\"在这里填写备注信息\" autosize />\n\t\t</van-cell-group>\n\t\t<div style=\"height:50px; background-color: white\"></div>\n\n\t\t<van-submit-bar :price=\"totalPrice\" button-text=\"提交订单\" label='实付金额：' @submit=\"onSubmit\"/>\n\t</div>\n</template>\n\n<script>\n\timport productCard from '../components/product/productcard'\n\timport headerNav from '../components/header/nav'\n\timport {mapActions, mapState} from \"vuex\";\n\n\texport default {\n\t\tname: 'Order',\n\n\t\tcomponents: {\n\t\t\tproductCard,\n\t\t\theaderNav,\n\t\t},\n\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttotalPrice: 0,\n\n\t\t\t\tisOrderTypePickerShow: false,\n\t\t\t\torderTypeString: ['订货单', '退货单'],\n\t\t\t\torderType: 0,\n\n\t\t\t\tisExpressTypePickerShow: false,\n\t\t\t\texpressTypeString: ['自提', '物流'],\n\t\t\t\texpressType: 0,\n\n\t\t\t\tisAddressPickerShow: false,\n\t\t\t\taddressList: [],\n\t\t\t\taddressIndex: 0,\n\n\t\t\t\tpickUpInfo: {\n\t\t\t\t\tname: '',\n\t\t\t\t\tphone: '',\n\t\t\t\t\tCarNumber: '',\n\t\t\t\t\tdate: null,\n\t\t\t\t\tdateString: '请选择取货日期',\n\t\t\t\t\ttime: '请选择取货时间',\n\t\t\t\t},\n\t\t\t\tisDatePickerShow: false,\n\t\t\t\tisTimePickerShow: false,\n\t\t\t\tminDate: null,\n\t\t\t\tminHour: 9,\n\t\t\t\tmaxHour: 18,\n\n\t\t\t\tnotes: '',\n\t\t\t};\n\t\t},\n\n\t\tcomputed: {\n\t\t\t...mapState([\"shoppingCart\", \"address\", \"sysAddress\", \"userInfo\"]),\n\n\t\t\ttotalCount: {\n\t\t\t\tget() {\n\t\t\t\t\tlet total = 0;\n\t\t\t\t\tthis.shoppingCart.forEach(item => {\n\t\t\t\t\t\ttotal += item.GoodsCount;\n\t\t\t\t\t});\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\tasync mounted() {\n\t\t\tawait this.loadShoppingCart(true);\n\t\t\tawait this.loadAddress();\n\t\t\tawait this.loadSysAddress();\n\t\t\tthis.initTotalPrice();\n\n\t\t\tthis.pickUpInfo.name = this.userInfo.accattach.TrueName;\n\t\t\tthis.pickUpInfo.phone = this.userInfo.accattach.Mobile;\n\t\t\tthis.pickUpInfo.CarNumber = this.userInfo.accattach.CarNumber;\n\n\t\t\tthis.addressList = this.sysAddress;\n\n\t\t\tlet nowHour = new Date().getHours();\n\t\t\tif (nowHour > 9) {\n\t\t\t\tlet tomorrow = new Date();\n\t\t\t\ttomorrow.setDate(tomorrow.getDate() + 1);\n\t\t\t\tthis.minDate = tomorrow;\n\t\t\t} else {\n\t\t\t\tthis.minDate = new Date();\n\t\t\t}\n\t\t},\n\n\t\tmethods: {\n\t\t\t...mapActions([\"loadShoppingCart\", \"loadAddress\", \"loadSysAddress\"]),\n\n\t\t\tinitTotalPrice() {\n\t\t\t\tthis.totalPrice = 0;\n\t\t\t\tthis.shoppingCart.forEach(item => {\n\t\t\t\t\tthis.totalPrice += item.GoodsCount * item.Price;\n\t\t\t\t});\n\t\t\t\tthis.totalPrice *= 100;\n\t\t\t},\n\n\t\t\tshowOrderTypePicker() {\n\t\t\t\tthis.isOrderTypePickerShow = true;\n\t\t\t},\n\n\t\t\tonOrderTypeChange(picker, value, index) {\n\t\t\t\tthis.orderType = index;\n\t\t\t\tthis.addressList = this.sysAddress;\n\t\t\t\tthis.addressIndex = 0;\n\t\t\t\tthis.expressType = 0;\n\t\t\t},\n\n\t\t\tshowExpressTypePicker() {\n\t\t\t\tthis.isExpressTypePickerShow = true;\n\t\t\t},\n\n\t\t\tonExpressTypeChange(picker, value, index) {\n\t\t\t\tthis.expressType = index;\n\t\t\t\tthis.addressIndex = 0;\n\t\t\t\tthis.addressList = (this.expressType === 0) ? this.sysAddress : this.address;\n\t\t\t},\n\n\t\t\tshowAddressPicker() {\n\t\t\t\tif (this.addressList.length > 0) {\n\t\t\t\t\tthis.isAddressPickerShow = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.$router.push('/addressList');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonAddressSelect(item, index) {\n\t\t\t\tthis.addressIndex = index;\n\t\t\t\tthis.isAddressPickerShow = false;\n\t\t\t},\n\n\t\t\tshowDatePicker() {\n\t\t\t\tthis.isDatePickerShow = true;\n\t\t\t},\n\n\t\t\thideDatePicker() {\n\t\t\t\tthis.isDatePickerShow = false;\n\t\t\t},\n\n\t\t\tonDateChange(date) {\n\t\t\t\tlet reg = new RegExp(\"/\", \"g\");\n\t\t\t\tthis.pickUpInfo.date = date;\n\t\t\t\tthis.pickUpInfo.dateString = date.toLocaleDateString();\n\t\t\t\tthis.pickUpInfo.dateString = this.pickUpInfo.dateString.replace(reg, '-');\n\n\t\t\t\tlet selectDateString = date.toLocaleDateString();\n\t\t\t\tlet todatDateString = new Date().toLocaleDateString();\n\t\t\t\tlet tomorrow = new Date();\n\t\t\t\ttomorrow.setDate(tomorrow.getDate() + 1);\n\t\t\t\tlet tomorrowDateString = tomorrow.toLocaleDateString();\n\n\t\t\t\tif (selectDateString === todatDateString) {\n\t\t\t\t\tthis.minHour = 13;\n\t\t\t\t\tthis.maxHour = 18;\n\t\t\t\t} else if (selectDateString === tomorrowDateString) {\n\t\t\t\t\tlet nowHour = new Date().getHours();\n\t\t\t\t\tif (nowHour < 17) {\n\t\t\t\t\t\tthis.minHour = 9;\n\t\t\t\t\t\tthis.maxHour = 18;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.minHour = 13;\n\t\t\t\t\t\tthis.maxHour = 18;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.minHour = 9;\n\t\t\t\t\tthis.maxHour = 18;\n\t\t\t\t}\n\n\t\t\t\tthis.hideDatePicker();\n\t\t\t},\n\n\t\t\tshowTimePicker() {\n\t\t\t\tthis.isTimePickerShow = true;\n\t\t\t},\n\n\t\t\thideTimePicker() {\n\t\t\t\tthis.isTimePickerShow = false;\n\t\t\t},\n\n\t\t\tonTimeChange(time) {\n\t\t\t\tthis.pickUpInfo.time = time;\n\t\t\t\tthis.hideTimePicker();\n\t\t\t},\n\n\t\t\tasync onSubmit() {\n\t\t\t\tif (this.addressList.length === 0) {\n\t\t\t\t\tthis.$Message.error(\"请选择收货地址\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet addressId = this.addressList[this.addressIndex].AddressID;\n\t\t\t\tlet type = this.orderType === 0 ? 1 : 2;\n\t\t\t\tlet expressType = this.expressType === 0 ? 2 : 1;\n\t\t\t\tlet userId = this.userInfo.accattach.UserID;\n\n\t\t\t\tif (this.orderType === 0 && this.expressType === 0) {\n\t\t\t\t\tlet carNumber = this.pickUpInfo.CarNumber;\n\t\t\t\t\tlet pickUpMan = this.pickUpInfo.name;\n\t\t\t\t\tlet pickUpPhone = this.pickUpInfo.phone;\n\n\t\t\t\t\tlet pickupTime = this.pickUpInfo.dateString;\n\t\t\t\t\tpickupTime += `T${this.pickUpInfo.time}:00.000Z`;\n\n\t\t\t\t\tif (!pickUpMan) {\n\t\t\t\t\t\tthis.$Message.error(\"请填写取货人\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!pickUpPhone) {\n\t\t\t\t\t\tthis.$Message.error(\"请填写联系电话\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!carNumber) {\n\t\t\t\t\t\tthis.$Message.error(\"请填写取货车牌\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.pickUpInfo.dateString === '请选择取货日期') {\n\t\t\t\t\t\tthis.$Message.error(\"请选择取货日期\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.pickUpInfo.time === '请选择取货时间') {\n\t\t\t\t\t\tthis.$Message.error(\"请选择取货时间\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet res = await this.$request.saveOrder(userId, addressId, this.notes, type, expressType, carNumber, pickupTime, pickUpMan, pickUpPhone);\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.$toast.success({duration: 1500, message: '下单成功'});\n\t\t\t\t\t\tthis.$router.replace('/index');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$toast.fail({duration: 1500, message: '下单失败'});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet res = await this.$request.saveOrder(userId, addressId, this.notes, type, expressType);\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.$toast.success({duration: 1500, message: '下单成功'});\n\t\t\t\t\t\tthis.$router.replace('/index');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$toast.fail({duration: 1500, message: '下单失败'});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style lang=\"less\" scoped>\n\t.order {\n\t\tfont-size: 14px;\n\t\tbackground: #f7f7f7;\n\t\t.contact-card::before {\n\t\t\tcontent: \"\";\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\theight: 2px;\n\t\t\tposition: absolute;\n\t\t\tbackground: -webkit-repeating-linear-gradient(\n\t\t\t\t\t135deg,\n\t\t\t\t\t#ff6c6c 0,\n\t\t\t\t\t#ff6c6c 20%,\n\t\t\t\t\ttransparent 0,\n\t\t\t\t\ttransparent 25%,\n\t\t\t\t\t#3283fa 0,\n\t\t\t\t\t#3283fa 45%,\n\t\t\t\t\ttransparent 0,\n\t\t\t\t\ttransparent 50%\n\t\t\t);\n\t\t\tbackground: repeating-linear-gradient(\n\t\t\t\t\t-45deg,\n\t\t\t\t\t#ff6c6c 0,\n\t\t\t\t\t#ff6c6c 20%,\n\t\t\t\t\ttransparent 0,\n\t\t\t\t\ttransparent 25%,\n\t\t\t\t\t#3283fa 0,\n\t\t\t\t\t#3283fa 45%,\n\t\t\t\t\ttransparent 0,\n\t\t\t\t\ttransparent 50%\n\t\t\t);\n\t\t\tbackground-size: 80px;\n\t\t}\n\t\t.total {\n\t\t\t.van-cell__value {\n\t\t\t\tcolor: red;\n\t\t\t}\n\t\t}\n\n\t\t.van-submit-bar__bar {\n\t\t\tborder-top: 1px solid #f7f7f7;\n\t\t}\n\t\t.additional {\n\t\t\t.van-cell {\n\t\t\t\tpadding: 0 15px;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t.van-cell__title {\n\t\t\t\tflex: 11;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twhite-space: nowrap;\n\t\t\t}\n\t\t\t.van-tag {\n\t\t\t\tline-height: 12px;\n\t\t\t\tmargin-right: 5px;\n\t\t\t}\n\n\t\t\t.price {\n\t\t\t\tcolor: #e93b3d;\n\t\t\t\tfont-size: 10px;\n\t\t\t\tspan {\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.hideSelect {\n\t\tpadding-bottom: 0;\n\t\theight: 250px;\n\n\t\t.van-radio__icon {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.van-address-item__edit {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.van-address-list__add {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/order.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order\"},[_c('headerNav',{attrs:{\"title\":\"确认订单\"}}),_vm._v(\" \"),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"订单类型\",\"value\":_vm.orderTypeString[_vm.orderType],\"is-link\":\"\"},on:{\"click\":_vm.showOrderTypePicker}}),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isOrderTypePickerShow),callback:function ($$v) {_vm.isOrderTypePickerShow=$$v},expression:\"isOrderTypePickerShow\"}},[_c('van-picker',{attrs:{\"columns\":_vm.orderTypeString,\"default-index\":_vm.orderType},on:{\"change\":_vm.onOrderTypeChange}})],1),_vm._v(\" \"),(_vm.orderType === 0)?_c('van-cell',{attrs:{\"title\":\"取货方式\",\"value\":_vm.expressTypeString[_vm.expressType],\"is-link\":\"\"},on:{\"click\":_vm.showExpressTypePicker}}):_vm._e(),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isExpressTypePickerShow),callback:function ($$v) {_vm.isExpressTypePickerShow=$$v},expression:\"isExpressTypePickerShow\"}},[_c('van-picker',{attrs:{\"columns\":_vm.expressTypeString,\"default-index\":_vm.expressType},on:{\"change\":_vm.onExpressTypeChange}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"5px\"}}),_vm._v(\" \"),_c('van-cell',{staticClass:\"contact-card\",attrs:{\"center\":\"\",\"border\":false,\"is-link\":\"\"},on:{\"click\":_vm.showAddressPicker}},[(_vm.addressList.length === 0)?[_c('strong',[_vm._v(\"暂无收货地址，点我去添加\")])]:[_c('strong',[_vm._v(_vm._s(((_vm.addressList[_vm.addressIndex].name) + \" \" + (_vm.addressList[_vm.addressIndex].tel))))]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.addressList[_vm.addressIndex].address))])]],2),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isAddressPickerShow),callback:function ($$v) {_vm.isAddressPickerShow=$$v},expression:\"isAddressPickerShow\"}},[_c('van-address-list',{staticClass:\"hideSelect\",attrs:{\"list\":_vm.addressList},on:{\"select\":_vm.onAddressSelect}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"7px\"}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"商品总量\",\"value\":_vm.totalCount}}),_vm._v(\" \"),_vm._l((_vm.shoppingCart),function(product,index){return _c('div',{key:index,staticClass:\"card\"},[_c('product-card',{attrs:{\"product\":product,\"isOrder\":true}})],1)}),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"5px\"}}),_vm._v(\" \"),(_vm.orderType === 0 && _vm.expressType === 0)?_c('van-cell-group',[_c('van-field',{attrs:{\"clearable\":\"\",\"label\":\"取货人\",\"placeholder\":\"请输入取货人姓名\"},model:{value:(_vm.pickUpInfo.name),callback:function ($$v) {_vm.$set(_vm.pickUpInfo, \"name\", $$v)},expression:\"pickUpInfo.name\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"clearable\":\"\",\"label\":\"联系电话\",\"placeholder\":\"请输入联系电话\"},model:{value:(_vm.pickUpInfo.phone),callback:function ($$v) {_vm.$set(_vm.pickUpInfo, \"phone\", $$v)},expression:\"pickUpInfo.phone\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"clearable\":\"\",\"label\":\"取货车牌\",\"placeholder\":\"请输入取货车牌号\"},model:{value:(_vm.pickUpInfo.CarNumber),callback:function ($$v) {_vm.$set(_vm.pickUpInfo, \"CarNumber\", $$v)},expression:\"pickUpInfo.CarNumber\"}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"取货日期\",\"value\":_vm.pickUpInfo.dateString,\"is-link\":\"\"},on:{\"click\":_vm.showDatePicker}}),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isDatePickerShow),callback:function ($$v) {_vm.isDatePickerShow=$$v},expression:\"isDatePickerShow\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"date\",\"min-date\":_vm.minDate},on:{\"confirm\":_vm.onDateChange,\"cancel\":_vm.hideDatePicker}})],1),_vm._v(\" \"),(_vm.pickUpInfo.date)?[_c('van-cell',{attrs:{\"title\":\"取货时间\",\"value\":_vm.pickUpInfo.time,\"is-link\":\"\"},on:{\"click\":_vm.showTimePicker}}),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isTimePickerShow),callback:function ($$v) {_vm.isTimePickerShow=$$v},expression:\"isTimePickerShow\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"time\",\"min-hour\":_vm.minHour,\"max-hour\":_vm.maxHour},on:{\"confirm\":_vm.onTimeChange,\"cancel\":_vm.hideTimePicker}})],1)]:_vm._e()],2):_vm._e(),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"5px\"}}),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"备注\",\"type\":\"textarea\",\"placeholder\":\"在这里填写备注信息\",\"autosize\":\"\"},model:{value:(_vm.notes),callback:function ($$v) {_vm.notes=$$v},expression:\"notes\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"50px\",\"background-color\":\"white\"}}),_vm._v(\" \"),_c('van-submit-bar',{attrs:{\"price\":_vm.totalPrice,\"button-text\":\"提交订单\",\"label\":\"实付金额：\"},on:{\"submit\":_vm.onSubmit}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ed71e91\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\",\"audio\":\"src\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/order.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ed71e91\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./order.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./order.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./order.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ed71e91\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\",\\\"audio\\\":\\\"src\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./order.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ed71e91\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/order.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}