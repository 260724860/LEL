webpackJsonp([10],{GLLV:function(t,e){},jqjR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n("Xxa5"),o=n.n(c),a=n("exGp"),s=n.n(a),r=n("Dd8w"),i=n.n(r),l=n("Fd2+"),d=n("1bjU"),h=n("ARvI"),u=n("QhFP"),p=n("NYxO"),v={name:"Cart",components:{headerNav:d.a,navigate:h.a,productCard:u.a},data:function(){return{checkedAll:!1,checkedGoods:[]}},computed:i()({},Object(p.d)(["shoppingCart"]),{totalCount:{get:function(){var t=0;return this.shoppingCart.forEach(function(e){t+=e.GoodsCount}),t}},totalPrice:{get:function(){var t=0;return this.shoppingCart.forEach(function(e){t+=e.GoodsCount*e.Price}),100*t}}}),mounted:function(){var t=this;return s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("SET_TABBAR_INDEX",2),e.next=3,t.loadShoppingCart();case 3:case"end":return e.stop()}},e,t)}))()},methods:i()({},Object(p.b)(["loadShoppingCart"]),{toggleCheckAll:function(){if(this.checkedAll){this.checkedGoods=[];for(var t=0;t<this.shoppingCart.length;t++)this.checkedGoods.push(t)}else this.checkedGoods.length===this.shoppingCart.length&&(this.checkedGoods=[])},toggleOne:function(){this.checkedAll=this.checkedGoods.length===this.shoppingCart.length},deleteSelect:function(){var t=this;0!==this.checkedGoods.length?l.c.confirm({title:"购物车",message:"确认删除选中的商品？"}).then(s()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.checkedGoods.forEach(function(e){n.push(t.shoppingCart[e].CartID)}),e.next=4,t.$request.deleteCart(n);case 4:if(!e.sent){e.next=11;break}return t.$Message.info("删除成功"),t.checkedAll=!1,t.checkedGoods=[],e.next=11,t.loadShoppingCart();case 11:case"end":return e.stop()}},e,t)}))).catch(function(){}):this.$Message.error("请先选择要删除的商品")},deleteItem:function(t){var e=this;l.c.confirm({title:"购物车",message:"确认删除此商品？"}).then(s()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$request.deleteCart([e.shoppingCart[t].CartID]);case 2:if(!n.sent){n.next=9;break}return e.$Message.info("删除成功"),e.checkedAll=!1,e.checkedGoods=[],n.next=9,e.loadShoppingCart();case 9:case"end":return n.stop()}},n,e)}))).catch(function(){})},onSubmit:function(){this.$router.push("/order")}})},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("headerNav",{attrs:{title:"购物车"}}),t._v(" "),0===t.shoppingCart.length?n("div",{staticClass:"product-not-found-container"},[t._m(0),t._v(" "),n("div",{staticClass:"product-not-found-txt"},[t._v("购物车空空如也")])]):[n("van-cell",{staticClass:"head"},[n("template",{slot:"title"},[n("van-checkbox",{on:{change:t.toggleCheckAll},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")])],1),t._v(" "),n("template",{slot:"right-icon"},[n("div",{staticStyle:{display:"flex"},on:{click:t.deleteSelect}},[n("span",[t._v("删除选中")]),t._v(" "),n("van-icon",{staticClass:"custom-icon",attrs:{name:"delete",size:"18px"}})],1)])],2),t._v(" "),n("van-cell",{attrs:{title:"商品总量",value:t.totalCount}}),t._v(" "),n("van-checkbox-group",{staticClass:"card-goods",on:{change:t.toggleOne},model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},[n("div",{staticClass:"promotion-group"},t._l(t.shoppingCart,function(e,c){return n("div",{key:c,staticClass:"card-goods__item"},[n("van-checkbox",{attrs:{name:c}}),t._v(" "),n("product-card",{attrs:{product:e,isCard:!0}},[n("template",{slot:"default"},[n("van-cell",{attrs:{title:"小计:￥"+e.totalPrice}},[n("template",{slot:"right-icon"},[n("div",{staticStyle:{display:"flex"},on:{click:function(e){return t.deleteItem(c)}}},[n("span",[t._v("删除商品")]),t._v(" "),n("van-icon",{staticClass:"custom-icon",attrs:{name:"delete",size:"18px"}})],1)])],2)],1)],2)],1)}),0)]),t._v(" "),n("van-submit-bar",{staticStyle:{bottom:"50px"},attrs:{price:t.totalPrice,"button-text":"去下单",label:"总金额："},on:{submit:t.onSubmit}})],t._v(" "),n("navigate"),t._v(" "),n("div",{staticStyle:{height:"50px"}})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"product-not-found-img"},[e("img",{attrs:{src:n("nJow"),width:"30%",height:"30%"}})])}]};var g=n("VU/8")(v,f,!1,function(t){n("GLLV")},null,null);e.default=g.exports}});
//# sourceMappingURL=10.468a294526979572cf4e.js.map