webpackJsonp([14],{"5puV":function(t,e){},K2ok:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Xxa5"),n=s.n(o),a=s("exGp"),r=s.n(a),i=s("Dd8w"),u=s.n(i),c=s("1bjU"),d=s("NYxO"),l={name:"Serial",components:{headerNav:c.a},data:function(){return{serialNumber:"",maxCount:1e4,notFound:!1,isSkuShow:!1,skuData:{sku:{tree:[],list:[],price:""},goodsInfo:{id:null,title:"",picture:""}},selectString:[],selectIndex:[],specs:["味道","颜色","尺寸"],count:1}},computed:u()({},Object(d.d)(["goodsInfo","searchResult"])),mounted:function(){this.$refs.searchBar.focus()},methods:u()({},Object(d.b)(["loadGoodsInfo","loadSerialSearchResult"]),{search:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.serialNumber.trim()){e.next=3;break}return t.$Message.error("请输入商品条码"),e.abrupt("return");case 3:return e.next=5,t.loadSerialSearchResult(t.serialNumber);case 5:if(0!==t.searchResult.GoodsModel.length){e.next=9;break}t.notFound=!0,e.next=21;break;case 9:return t.notFound=!1,e.next=12,t.loadGoodsInfo(t.searchResult.GoodsModel[0].GoodsID);case 12:t.skuData.sku.price=t.goodsInfo.SpecialOffer,t.skuData.goodsInfo.id=t.goodsInfo.GoodsID,t.skuData.goodsInfo.title=t.goodsInfo.GoodsName,t.skuData.goodsInfo.picture=t.goodsInfo.Image,t.initSelectString(),t.count=1,t.isSkuShow=!0,t.maxCount=t.goodsInfo.Quota>0?t.goodsInfo.Quota:t.maxCount,t.maxCount=Math.min(t.maxCount,t.goodsInfo.Stock);case 21:case"end":return e.stop()}},e,t)}))()},initSelectString:function(){this.selectString=[];for(var t=0;t<this.goodsInfo.ValuesList.length;t++)this.selectString.push(this.goodsInfo.ValuesList[t][0].GoodsValueName),this.selectIndex[t]=this.goodsInfo.ValuesList[t][0].GoodsValueID},select:function(t){var e=this;this.goodsInfo.ValuesList[t].forEach(function(s){s.GoodsValueName===e.selectString[t]&&(e.selectIndex[t]=s.GoodsValueID)})},toCart:function(){this.$router.push("/cart")},addToCart:function(){var t=this;return r()(n.a.mark(function e(){var s,o,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(s=[],o=0;o<t.selectIndex.length;o++)a={CategoryType:o+1,GoodsValueID:t.selectIndex[o]},s.push(a);return e.next=4,t.$request.addCart(t.goodsInfo.goodsID,t.count,s);case 4:e.sent&&t.$Message.success("加入购物车成功"),t.isSkuShow=!1,t.serialNumber="",t.$refs.searchBar.focus();case 9:case"end":return e.stop()}},e,t)}))()}})},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("headerNav",{attrs:{title:"条码搜索"}}),t._v(" "),s("i-input",{ref:"searchBar",staticClass:"search",attrs:{size:"large",placeholder:"请输入商品条码"},on:{"on-enter":t.search},model:{value:t.serialNumber,callback:function(e){t.serialNumber=e},expression:"serialNumber"}},[s("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.search},slot:"append"})],1),t._v(" "),t.notFound?s("div",{staticClass:"product-not-found-container"},[t._m(0),t._v(" "),s("div",{staticClass:"product-not-found-txt"},[t._v("未找到相关商品")])]):t._e(),t._v(" "),s("van-goods-action",[s("van-goods-action-big-btn",{attrs:{primary:""},on:{click:t.toCart}},[t._v("\n\t\t\t查看购物车\n\t\t")])],1),t._v(" "),s("van-sku",{attrs:{sku:t.skuData.sku,goods:t.skuData.goodsInfo,"goods-id":t.skuData.goodsInfo.id,"hide-stock":!0,"hide-quota-text":!0,quota:0,"close-on-click-overlay":!0},on:{"add-cart":t.addToCart},scopedSlots:t._u([{key:"sku-actions",fn:function(e){return[s("div",{staticClass:"van-sku-actions"},[s("van-button",{attrs:{type:"primary","bottom-action":""},on:{click:function(t){return e.skuEventBus.$emit("sku:addCart")}}},[t._v("加入购物车")])],1)]}},{key:"sku-header-price",fn:function(e){return[s("div",{staticStyle:{display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{color:"red"}},[t._v("￥"+t._s(t.goodsInfo.SpecialOffer))]),t._v(" "),s("div",[-1!==t.goodsInfo.Quota?s("span",{staticStyle:{"margin-right":"10px","font-size":"12px"}},[t._v("限购："+t._s(t.goodsInfo.Quota)+"件")]):t._e(),t._v(" "),s("span",{staticStyle:{"font-size":"12px"}},[t._v("库存："+t._s(t.goodsInfo.Stock)+"件")])])])]}},{key:"sku-group",fn:function(e){return[s("div",{staticClass:"van-sku-group-container"},t._l(t.goodsInfo.ValuesList,function(e,o){return s("div",{key:o,staticClass:"van-sku-row"},[s("div",{staticClass:"item-select-title"},[s("p",[t._v(t._s(t.specs[t.goodsInfo.ValuesList[o][0].CategoryType-1])+"：")])]),t._v(" "),s("div",{staticClass:"item-select-column"},[s("div",{staticClass:"item-select-row"},[s("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(e){return t.select(o)}},model:{value:t.selectString[o],callback:function(e){t.$set(t.selectString,o,e)},expression:"selectString[index]"}},t._l(e,function(t,e){return s("Radio",{key:e,attrs:{label:t.GoodsValueName}})}),1)],1)])])}),0)]}},{key:"sku-stepper",fn:function(e){return[s("div",{staticClass:"van-sku-stepper-stock"},[s("div",{staticClass:"van-sku-stepper-container"},[s("div",{staticClass:"van-sku__stepper-title"},[t._v("购买数量：")]),t._v(" "),s("div",{staticClass:"van-stepper van-sku__stepper"},[s("van-stepper",{attrs:{integer:"",min:1,max:t.maxCount,"input-width":"50px"},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1)])])]}}]),model:{value:t.isSkuShow,callback:function(e){t.isSkuShow=e},expression:"isSkuShow"}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"product-not-found-img"},[e("img",{attrs:{src:s("nJow"),width:"30%",height:"30%"}})])}]};var p=s("VU/8")(l,f,!1,function(t){s("5puV")},"data-v-3434bcff",null);e.default=p.exports}});
//# sourceMappingURL=14.72ea2a5e5f41fa838056.js.map