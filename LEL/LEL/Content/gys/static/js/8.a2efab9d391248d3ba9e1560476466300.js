webpackJsonp([8],{SWSt:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l("Dd8w"),r=l.n(i),a=l("woOf"),s=l.n(a),n=l("FWz8"),o=l("xT6B"),u=l("g5t5"),c=l("NYxO");function d(e){var t=new Date(e);return Object(o.b)(t,"yyyy-MM-dd")}var h=new Date;h.setDate(h.getDate()-7);var p={opage:1,Offset:0,Rows:10,KeyWords:null,BeginTime:null,EndTime:null,Status:null,OrderNo:null,UserID:null,SuppliersID:JSON.parse(localStorage.getItem("userInfoS")).SuppliersID,OrderType:null,checkTime:[d(h),d(new Date)]},f={name:"orderDelivery",components:{LogisticsDialog:u.a},data:function(){return{listQuery:s()({},p),listLoading:!0,list:null,total:0,operateType:null,multipleSelection:[],closeOrder:{dialogVisible:!1,content:null,orderIds:[]},pickerOptions:{shortcuts:[{text:"昨天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-864e5),e.$emit("pick",[l,t])}},{text:"最近一周",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-6048e5),e.$emit("pick",[l,t])}},{text:"最近一月",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-2592e6),e.$emit("pick",[l,t])}}]},statusOptions:[{label:"待接单",value:1},{label:"已接单",value:2},{label:"已取消",value:3}],operateOptions:[{label:"批量发货",value:1},{label:"关闭订单",value:2},{label:"删除订单",value:3}],logisticsDialogVisible:!1,OrderTypeList:[{label:"订货单",value:1},{label:"退货单",value:2},{label:"加急单",value:3}]}},beforeRouteEnter:function(e,t,l){"orderDeliveryDetails"==t.name&&(e.meta.isBack=!0,console.log("from"+t)),l(),console.log("to.meta.isBack"+e.meta.isBack)},created:function(){var e=this.$route.query.status;(e||0==e)&&(this.listQuery.Status=Number(e)),this.getList()},filters:{OrderFilte:function(e){return 1==e?"订货单":2==e?"退货单":3==e?"加急单":void 0},filteTime:function(e){return e.indexOf("T")>-1?e.replace(/T/g," "):e},formatCreateTime:function(e){var t=new Date(e);return Object(o.b)(t,"yyyy-MM-dd")},formatLineStatus:function(e){return 0===e?"未派发":1===e?"待接单":2===e?"已接单":"已取消"},formatStatus:function(e){return 0===e?"未确认":1===e?"已完成":2===e?"已审核":3===e?"待接单":4===e?"已接单":5===e?"已取消":void 0},lineStatusFilte:function(e){return 1==e?"未处理":"已处理"}},methods:r()({print:function(){this.$PrintJS({printable:"orderDeliveryID",type:"html",style:"td,th{text-align:center;}td:last-child{display:none}th:nth-last-child(2){display:none}td{border:1px solid #000}",scanStyles:!1})}},Object(c.b)(["setOrderList"]),{handleResetSearch:function(){this.listQuery=s()({},p),this.listQuery.checkTime=null},handleSearchList:function(){this.listQuery.opage=1,this.listQuery.Offset=0,null==this.listQuery.checkTime?(this.listQuery.BeginTime="",this.listQuery.EndTime="",this.$message({message:"必选选择时间",type:"warning",duration:2e3})):(this.listQuery.BeginTime=d(this.listQuery.checkTime[0]),this.listQuery.EndTime=d(this.listQuery.checkTime[1]),this.getList())},handleSelectionChange:function(e){this.multipleSelection=e},handleViewOrder:function(e,t){var l="/oms/orderDeliveryDetails";2==t.OrderType&&(l="/oms/returnApplyDetail"),this.$router.push({path:l,query:{OrderNo:t.Out_Trade_No,ct:d(t.CreateTime)}})},handleSizeChange:function(e){this.listQuery.opage=1,this.listQuery.Offset=0,this.listQuery.Rows=e,this.getList()},handleCurrentChange:function(e){this.listQuery.opage=e,this.listQuery.Offset=this.listQuery.Rows*(this.listQuery.opage-1),this.getList()},handleCloseOrderConfirm:function(){var e=this;if(null!=this.closeOrder.content&&""!==this.closeOrder.content){var t=new URLSearchParams;t.append("ids",this.closeOrder.orderIds),t.append("note",this.closeOrder.content),Object(n.a)(t).then(function(t){e.closeOrder.orderIds=[],e.closeOrder.dialogVisible=!1,e.getList(),e.$message({message:"修改成功",type:"success",duration:1e3})})}else this.$message({message:"操作备注不能为空",type:"warning",duration:1e3})},getList:function(){var e,t,l,i,r,a,s,n=this;this.listLoading=!0,this.listQuery.BeginTime=d(this.listQuery.checkTime[0]),this.listQuery.EndTime=(e=d(this.listQuery.checkTime[1]),t=1,l="",i=new Date(Date.parse(e)+864e5*t),r=i.getFullYear(),a=i.getMonth()+1,s=i.getDate(),l+=r+"-",l+=a>=10?a+"-":"0"+a+"-",l+=s>=10?s:"0"+s),this.listQuery.Offset=this.listQuery.Rows*(this.listQuery.opage-1),this.$request.GetListOrderforSuppier(this.listQuery).then(function(e){if(n.listLoading=!1,e.content){var t=e.content;t.forEach(function(e){e.Status1>=2&&e.Status2>=2&&e.Status3>=2?e.lineStatus=2:e.lineStatus=1}),n.list=t,n.total=e.accattach}else n.total=0})},covertOrder:function(e){var t=e.receiverProvince+e.receiverCity+e.receiverRegion+e.receiverDetailAddress;return{orderId:e.id,orderSn:e.orderSn,receiverName:e.receiverName,receiverPhone:e.receiverPhone,receiverPostCode:e.receiverPostCode,address:t,deliveryCompany:null,deliverySn:null}}})},v={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[l("div",[l("i",{staticClass:"el-icon-search"}),e._v(" "),l("span",[e._v("筛选搜索")]),e._v(" "),l("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleSearchList()}}},[e._v("查询搜索")]),e._v(" "),l("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){e.handleResetSearch()}}},[e._v("重置")])],1),e._v(" "),l("div",{staticStyle:{"margin-top":"25px"}},[l("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[l("el-form-item",{attrs:{label:"商品："}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"商品名字"},model:{value:e.listQuery.KeyWords,callback:function(t){e.$set(e.listQuery,"KeyWords",t)},expression:"listQuery.KeyWords"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"订单号："}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"订单编号"},model:{value:e.listQuery.OrderNo,callback:function(t){e.$set(e.listQuery,"OrderNo",t)},expression:"listQuery.OrderNo"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"订单状态："}},[l("el-select",{staticClass:"input-width",attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.Status,callback:function(t){e.$set(e.listQuery,"Status",t)},expression:"listQuery.Status"}},e._l(e.statusOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"订单类型："}},[l("el-select",{staticClass:"input-width",attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.OrderType,callback:function(t){e.$set(e.listQuery,"OrderType",t)},expression:"listQuery.OrderType"}},e._l(e.OrderTypeList,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"选择时间："}},[l("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.listQuery.checkTime,callback:function(t){e.$set(e.listQuery,"checkTime",t)},expression:"listQuery.checkTime"}})],1)],1)],1)]),e._v(" "),l("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[l("i",{staticClass:"el-icon-tickets"}),e._v(" "),l("span",[e._v("数据列表")]),e._v(" "),l("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:e.print}},[e._v("打印")])],1),e._v(" "),l("div",{staticClass:"table-container"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"orderTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",id:"orderDeliveryID"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{label:"序列号",align:"center",type:"index",width:"70px"}}),e._v(" "),l("el-table-column",{attrs:{label:"订单编号",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Out_Trade_No))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"商品名称",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.GoodsName)+"...")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"商品总数",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.DeliverCount))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"提交时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filteTime")(t.row.CreateTime)))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"更新时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filteTime")(t.row.UpdateTime)))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"派单员",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.AdminName))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"派单员联系电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.AdminTelPhone))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"供货金额",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.SupplyMoney))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"订单状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",{style:{color:1==t.row.lineStatus?"red":""}},[e._v("\n          "+e._s(e._f("lineStatusFilte")(t.row.lineStatus))+"\n          ")])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"订单类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("OrderFilte")(t.row.OrderType)))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){e.handleViewOrder(t.$index,t.row)}}},[e._v("查看订单")])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.listQuery.opage,"page-size":e.listQuery.Rows,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"opage",t)}}})],1),e._v(" "),l("logistics-dialog",{model:{value:e.logisticsDialogVisible,callback:function(t){e.logisticsDialogVisible=t},expression:"logisticsDialogVisible"}})],1)},staticRenderFns:[]};var y=l("VU/8")(f,v,!1,function(e){l("cRaE")},"data-v-f0b4a45c",null);t.default=y.exports},cRaE:function(e,t){}});
//# sourceMappingURL=8.a2efab9d391248d3ba9e1560476466300.js.map