webpackJsonp([12],{C0rv:function(e,t){},OPKL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("lHA8"),r=i.n(n),o=i("c/Tr"),s=i.n(o),l=i("mvHQ"),a=i.n(l),c=i("woOf"),u=i.n(c),d=i("FWz8"),f=i("g5t5"),v=i("xT6B"),p=(i("7+uW"),i("95YI"));var m={OrderNo:null,RcAddr:"",RcName:"",RcPhone:"",receiverProvince:null,receiverCity:null,receiverRegion:null},h={name:"MRBdetail",components:{VDistpicker:i.n(p).a,LogisticsDialog:f.a},data:function(){return{HeadSpan:6,OrderNo:null,listLoading:!0,ordList:[],order:{},finishiFlag:!0,editCount:!0,receiverDialogVisible:!1,receiverInfo:u()({},m),moneyDialogVisible:!1,moneyInfo:{orderId:null,freightAmount:0,discountAmount:0,status:null},messageDialogVisible:!1,message:{title:null,content:null},closeDialogVisible:!1,closeInfo:{note:null,id:null},markOrderDialogVisible:!1,markInfo:{note:null},logisticsDialogVisible:!1,Status:null,infoList:{Head_Notes:"",Status:"",UserID:"",UserName:"",RcName:"",RcPhone:"",email:"",RcAddr:"",lineStatus:1},totleMoney:0,allCount:0,supplierCount:0,closeOrder:{},orderNote:null,ct:null,options:[{SuppliersID:"-1",Suppliers_Name:"无数据"}],isStatus:!0,multipleSelection:"",accomplish:!1,tableData:[],GoodsValueMappingList:[{CategoryType:1,name:"口味",GoodsValueList:[]},{CategoryType:2,name:"颜色",GoodsValueList:[]},{CategoryType:3,name:"尺寸",GoodsValueList:[]}]}},beforeCreate:function(){},watch:{OrderNo:function(e){}},created:function(){this.OrderNo=this.$route.query.OrderNo,this.ct=this.$route.query.ct,this.getOrderDetail(),this.onInfoMess(),this.calcTotalPrice()},computed:{},filters:{lineStatusFilte:function(e){return 1==e?"未处理":"已处理"},TimeFilte:function(e){return e.indexOf("T")>-1?e.replace(/T/g," "):e},ExpressFilte:function(e){return 1==e?"快递物流":2==e?"自提":void 0},OrderFilte:function(e){return 1==e?"订货单":2==e?"退货单":3==e?"加急单":void 0},formatTrim:function(e){return e.replace(/\s+/g,"")},formatNull:function(e){return void 0===e||null===e||""===e?"暂无":(e.indexOf("$")>-1&&(e=e.split("$")[1]),e)},getPercentage:function(e){return Math.round(100*e*1e3)/1e3/100},formatPhone:function(e){return e.replace(/\D/g,"")},formatLongText:function(e){return void 0===e||null===e||""===e?"暂无":e.length>8?e.substr(0,8)+"...":e},formatStatus:function(e){return 0===e?"未确认":1===e?"已完成":2===e?"待审核":3===e?"待接单":4===e?"已接单":"已取消"},formatLineStatus:function(e){return 0===e?"未派发":1===e?"待接单":2===e?"已接单":"已取消"},formatProductAttr:function(e){if(null==e)return"";for(var t=JSON.parse(e),i="",n=0;n<t.length;n++)i+=t[n].key,i+=":",i+=t[n].value,i+=";";return i}},methods:{getOrderDetail:function(){var e=this;this.listLoading=!0,this.$request.GetOrderDetails(this.OrderNo).then(function(t){e.listLoading=!1;var i=t.content;e.isStatus=!1,e.accomplish=!1;for(var n=function(t){i[t].maxVlaue=i[t].GoodsCount,1==i[t].Status&&(e.isStatus=!0),2==i[t].Status&&(e.accomplish=!0);var n=i[t].GoodsValuesList,r=JSON.parse(a()(e.GoodsValueMappingList));n.forEach(function(e){var t=e.CategoryType,i=e.GoodsValueName,n=e.SerialNumber;r[t-1].GoodsValueList.push({GoodsValueName:i,SerialNumber:n})});for(var o=0;o<r.length;o++)0==r[o].GoodsValueList.length&&(r.splice(o,1),o--);i[t].MappingList=r},r=0;r<i.length;r++)n(r);e.ordList=i,e.calcTotalPrice()})},onInfoMess:function(){var e,t,i=this,n=this.ct,r=function(e,t){var i="",n=new Date(Date.parse(e)+864e5*t),r=n.getFullYear(),o=n.getMonth()+1,s=n.getDate();return i+=r+"-",i+=o>=10?o+"-":"0"+o+"-",i+=s>=10?s:"0"+s}((e=this.ct,t=new Date(e),Object(v.b)(t,"yyyy-MM-dd")),1),o=JSON.parse(localStorage.getItem("userInfoS")).SuppliersID,s={Offset:0,Rows:10,KeyWords:"",BeginTime:n,EndTime:r,Status:"",OrderNo:this.OrderNo,SupplierID:o,UserID:"",OrderType:null};this.$request.GetListOrderforSuppier(s).then(function(e){var t=e.content;t.forEach(function(e){e.Status1>=2&&e.Status2>=2&&e.Status3>=2?e.lineStatus=2:e.lineStatus=1}),i.infoList=t[0],i.infoList.PickupTime||(i.HeadSpan=8),i.tableData=t.slice(0,1),i.Status=i.infoList.Status,i.orderNote=i.infoList.Notes,i.markInfo.note=i.orderNote})},onSelectRegion:function(e){this.receiverInfo.receiverProvince=e.province.value,this.receiverInfo.receiverCity=e.city.value,this.receiverInfo.receiverRegion=e.area.value},calcTotalPrice:function(){var e=this;e.totleMoney=0,e.supplierCount=0,e.allCount=0;var t=[];this.ordList.forEach(function(i,n){var r=i.DeliverCount;r||0===r||(r=1),e.allCount+=r,e.totleMoney+=r*i.SupplyPrice,t.push(i.DefultSupplier)}),this.supplierCount=s()(new r.a(t)).length},handleChange:function(e){this.calcTotalPrice()},HandleBlur:function(e){e.DeliverCount||0==e.DeliverCount||this.$nextTick(function(){e.DeliverCount=1})},reviseSupplier:function(e){var t=this;Object(d.e)(e).then(function(e){t.suppliersList=e,t.options=e.content})},updateSuppliersID:function(e,t){e.selectFlag=t},reviseGoodsCount:function(){this.editCount=!1},handleSelectionChange:function(e){this.multipleSelection=e},reviseSave:function(){var e=this;this.editCount=!0;var t=[];this.ordList.forEach(function(i){i.selectFlag?i.SuppliersID=i.SuppliersName:null==i.SupplierID?i.SuppliersID=i.DefultSupplierID:i.SuppliersID=i.SupplierID,t.push({Orders_Lines_ID:i.Orders_Lines_ID,SuppliersID:i.SuppliersID,GoodsCount:i.DeliverCount,UserType:2,UserID:e.infoList.UsersID,Notes:i.Notes,OrderHeadID:e.infoList.OrderHeadID})}),this.$request.BatchEditLinesInfo(t).then(function(t){null!=t?e.$message({type:"success",message:"修改成功!"}):e.$message({type:"success",message:"修改失败!"}),e.onInfoMess(),e.getOrderDetail(),e.$refs.orderLineTable.clearSelection()})},reviseCancel:function(){this.editCount=!0,this.getOrderDetail()},formatTime:function(e){if(null==e||""===e)return"";var t=new Date(e);return Object(v.b)(t,"yyyy-MM-dd")},formatStepStatus:function(e){return 0===e?1:1===e?4:2===e?2:3===e?2:4===e?3:4},showUpdateReceiverDialog:function(){var e=this.infoList.RcAddr.indexOf("省"),t=this.infoList.RcAddr.indexOf("市"),i=this.infoList.RcAddr.indexOf("县"),n=this.infoList.RcAddr.indexOf("区");this.receiverInfo.RcAddr=this.infoList.RcAddr,-1!=e&&"省"!=this.infoList.RcAddr.slice(0,e+1)&&(this.receiverInfo.receiverProvince=this.receiverInfo.RcAddr.slice(0,e+1),-1!=t&&"市"!=this.infoList.RcAddr.slice(e+1,t+1)&&(this.receiverInfo.receiverCity=this.receiverInfo.RcAddr.slice(e+1,t+1),-1!=i&&"县"!=this.infoList.RcAddr.slice(t+1,i+1)?(this.receiverInfo.receiverRegion=this.receiverInfo.RcAddr.slice(t+1,i+1),this.receiverInfo.RcAddr=this.receiverInfo.RcAddr.slice(i+1)):-1!=n&&"区"!=this.infoList.RcAddr.slice(t+1,n+1)&&(this.receiverInfo.receiverRegion=this.receiverInfo.RcAddr.slice(t+1,n+1),this.receiverInfo.RcAddr=this.receiverInfo.RcAddr.slice(n+1)))),this.receiverDialogVisible=!0,this.receiverInfo.OrderNo=this.infoList.OrderNo,this.receiverInfo.RcName=this.infoList.RcName,this.receiverInfo.RcPhone=this.infoList.RcPhone},handleUpdateReceiverInfo:function(){var e=this;this.$confirm("是否要修改收货信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""!=e.receiverInfo.RcName&&""!=e.receiverInfo.RcPhone&&""!=e.receiverInfo.RcAddr?/^1[345678]\d{9}$/.test(e.receiverInfo.RcPhone)?(e.receiverInfo.linAddr="",null!=e.receiverInfo.receiverProvince&&"省"!=e.receiverInfo.receiverProvince&&(e.receiverInfo.linAddr+=e.receiverInfo.receiverProvince),null!=e.receiverInfo.receiverCity&&"市"!=e.receiverInfo.receiverProvince&&(e.receiverInfo.linAddr+=e.receiverInfo.receiverCity),null!=e.receiverInfo.receiverRegion&&"县"!=e.receiverInfo.receiverProvince&&"区"!=e.receiverInfo.receiverProvince&&(e.receiverInfo.linAddr+=e.receiverInfo.receiverRegion),e.receiverInfo.RcAddr=e.receiverInfo.linAddr+e.receiverInfo.RcAddr,Object(d.d)(e.receiverInfo).then(function(t){e.receiverDialogVisible=!1,e.$message({type:"success",message:"修改成功!"}),e.onInfoMess()})):e.$message({message:"请输入合法电话号码",type:"warning",duration:2e3}):e.$message({message:"必须将信息填写完整",type:"warning",duration:2e3})})},updateStatus:function(e){var t=this;if(this.editCount){for(var i=[],n=0;n<this.ordList.length;n++){var r=this.ordList[n],o=r.Orders_Lines_ID,s=r.Notes;1==r.Status&&i.push({OrderLineID:o,Status:e,OrderNo:this.OrderNo,Notes:s})}this.updateStatusRequest(i)}else this.$confirm("此操作将不保存编辑内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"})})},UnilineCancel:function(e){var t=this;this.$prompt("商品："+e.GoodsName,"请输入取消原因",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[^\s]*$/,inputValue:"缺货",inputErrorMessage:"不能输入空格"}).then(function(i){var n=i.value,r=[{OrderLineID:e.Orders_Lines_ID,Status:3,OrderNo:t.OrderNo,Notes:n}];t.updateStatusRequest(r)}).catch()},updateStatusRequest:function(e){var t=this;this.$request.UpdateOrderLineStatus(e).then(function(e){0==e.code?t.$message({type:"success",message:"操作成功!"}):t.$message({type:"success",message:"操作失败!"}),t.onInfoMess(),t.getOrderDetail()})},showUpdateMoneyDialog:function(){this.moneyDialogVisible=!0,this.moneyInfo.orderId=this.order.id,this.moneyInfo.freightAmount=this.order.freightAmount,this.moneyInfo.discountAmount=this.order.discountAmount,this.moneyInfo.status=this.order.status},handleUpdateMoneyInfo:function(){var e=this;this.$confirm("是否要修改费用信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){updateMoneyInfo(e.moneyInfo).then(function(t){e.moneyDialogVisible=!1,e.$message({type:"success",message:"修改成功!"}),e.$request.GetOrderDetails(e.OrderNo).then(function(t){e.order=t.data})})})},showMessageDialog:function(){this.messageDialogVisible=!0,this.message.title=null,this.message.content=null},handleSendMessage:function(){var e=this;this.$confirm("是否要发送站内信?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.messageDialogVisible=!1,e.$message({type:"success",message:"发送成功!"})})},showCloseOrderDialog:function(){this.closeDialogVisible=!0,this.closeInfo.note=null,this.closeInfo.id=this.OrderNo},handleCloseOrder:function(){var e=this;this.$confirm("是否要关闭?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=new URLSearchParams;t.append("ids",[e.closeInfo.id]),t.append("note",e.closeInfo.note),Object(d.a)(t).then(function(t){e.closeDialogVisible=!1,e.$message({type:"success",message:"订单关闭成功!"}),e.$request.GetOrderDetails(e.OrderNo).then(function(t){e.order=t.data})})})},showMarkOrderDialog:function(){this.markOrderDialogVisible=!0},handleMarkOrder:function(){var e=this;this.$confirm("是否要备注订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(null!=e.markInfo.note&&""!==e.markInfo.note){var t={OrderNo:e.OrderNo,Head_Notes:e.ordList[0].GoodsName+"$"+e.markInfo.note};Object(d.f)(t).then(function(t){e.markOrderDialogVisible=!1,e.$message({type:"success",message:"订单备注成功!"}),e.onInfoMess()})}else e.$message({message:"操作备注不能为空",type:"warning",duration:1e3})})},handleDeleteOrder:function(){var e=this;this.$confirm("是否要进行该删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=new URLSearchParams;t.append("ids",[e.OrderNo]),Object(d.b)(t).then(function(t){e.$message({message:"删除成功！",type:"success",duration:1e3}),e.$router.back()})})},reminderDelivery:function(){this.$message({type:"success",message:"提醒发货成功!"})},showLogisticsDialog:function(){this.logisticsDialogVisible=!0},excelExp:function(){var e=[];this.ordList.forEach(function(t,i){for(var n="",r="",o=0;o<t.GoodsValuesList.length;o++){var s=t.GoodsValuesList[o];n+=s.GoodsValueName+"<br/>",r+=s.SerialNumber+"<br/>"}t.Notes||(t.Notes=""),e.push({index:i,SupplyPrice:t.SupplyPrice,GoodsName:t.GoodsName,GoodsCount:t.GoodsCount,DeliverCount:t.DeliverCount,NOrefund:(t.GoodsCount-t.DeliverCount)*t.SupplyPrice,refund:t.DeliverCount*t.SupplyPrice,Notes:t.Notes,ValueName:n,Numbers:r})});for(var t=[],i=0;i<this.tableData.length;i++){var n=u()({},this.tableData[i]),r=n.Out_Trade_No,o=(n.RcName,n.RcAddr,n.RcPhone,n.PickUpMan,n.PickUpPhone,n.CarNumber,n.PickupTime),s=n.Notes,l=n.OrderType,a=(n.ExpressType,n.DeliverCount);1==l?n.OrderTypeitem="订货单":2==l?n.OrderTypeitem="退货单":3==l&&(n.OrderTypeitem="加急单"),s=s&&s.indexOf("$")>-1?s.split("$")[1]:"",1==n.ExpressType?n.ExpressTypeitem="快递物流":2==n.ExpressType?n.ExpressTypeitem="自提":n.ExpressTypeitem="",o||(o=""),t.push({Out_Trade_No:r,PickupTime:o,Head_Notes:s,OrderTypeitem:n.OrderTypeitem,ExpressTypeitem:n.ExpressTypeitem,DeliverCount:a})}var c=[{refundCOUNT:0,allTotal:0,refundPrice:0,allPrice:0}];e.forEach(function(e){c[0].refundCOUNT+=e.GoodsCount-e.DeliverCount,c[0].allTotal+=e.DeliverCount,c[0].refundPrice+=(e.GoodsCount-e.DeliverCount)*e.SupplyPrice,c[0].allPrice+=e.DeliverCount*e.SupplyPrice});var d=this.getTbale(3,e),f=this.getTbale(1,t),v=this.getTbale(4,c);this.oneExportClick([f,d,v])},getTbale:function(e,t){var i="";1==e?i="<tr><td>订单编号</td><td>自提时间</td><td>订单备注</td><td>订单类型</td><td>快递类型</td><td>退货数量</td></tr>":3==e?i="<tr><td>序列号</td><td>价格</td><td>商品名</td><td>订单数量</td><td>退货数量</td><td>未退价格</td><td>退货价格</td><td>行备注</td><td>属性</td><td>条码</td></tr>":4==e&&(i="<tr><td>未退件数</td><td>退货件数</td><td>未退合计价格</td><td>退货合计价格</td></tr>");for(var n=0;n<t.length;n++){i+="<tr>";var r=t[n];for(var o in r)i+="<td>"+r[o]+"\t</td>"}return i+="</tr>"},oneExportClick:function(e){for(var t="",i=0;i<e.length;i++)t+="<table>"+e[i]+"</table><br/>";var n='<html xmlns:o="urn:schemas-microsoft-com:office:office"\n      xmlns:x="urn:schemas-microsoft-com:office:excel"\n      xmlns="http://www.w3.org/TR/REC-html40">\n      <head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet>\n        <x:Name>Sheet1</x:Name>\n        <x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet>\n        </x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e\n        <title>订单</title>\n        </head><body>'+t+"</body></html>";window.location.href="data:application/vnd.ms-excel;base64,"+this.base64(n)},base64:function(e){return window.btoa(unescape(encodeURIComponent(e)))}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"detail-container"},[i("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"never",id:"orderDelivery"}},[i("div",{staticClass:"operate-container"},[i("i",{staticClass:"el-icon-warning color-danger",staticStyle:{"margin-left":"20px"}}),e._v(" "),i("span",{staticClass:"color-danger"},[e._v("当前订单状态："+e._s(e._f("lineStatusFilte")(e.infoList.lineStatus)))])]),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("svg-icon",{staticStyle:{color:"#606266"},attrs:{"icon-class":"marker"}}),e._v(" "),i("span",{staticClass:"font-small"},[e._v("派单员信息")])],1),e._v(" "),i("div",{staticClass:"table-layout"},[i("el-row",[i("el-col",{staticClass:"table-cell-title",attrs:{span:8}},[e._v("派单员编号")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:8}},[e._v("派单员名称")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:8}},[e._v("派单员电话")])],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"table-cell",attrs:{span:8}},[e._v(e._s(e.infoList.AdminID))]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:8}},[e._v(e._s(e.infoList.AdminName))]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:8}},[e._v(e._s(e.infoList.AdminTelPhone))])],1)],1),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("svg-icon",{staticStyle:{color:"#606266"},attrs:{"icon-class":"marker"}}),e._v(" "),i("span",{staticClass:"font-small"},[e._v("基本信息")])],1),e._v(" "),i("div",{staticClass:"table-layout"},[i("el-row",[i("el-col",{staticClass:"table-cell-title",attrs:{span:e.HeadSpan}},[e._v("订单编号")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:e.HeadSpan}},[e._v("订单类型")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:e.HeadSpan}},[e._v("取货门店编号")]),e._v(" "),e.infoList.PickupTime?i("el-col",{staticClass:"table-cell-title",attrs:{span:e.HeadSpan}},[e._v("取货时间")]):e._e()],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"table-cell",attrs:{span:e.HeadSpan}},[e._v(e._s(e._f("formatNull")(e.OrderNo)))]),e._v(" "),i("el-col",{class:["table-cell",{"color-warning":1==e.infoList.OrderType,"color-danger":2==e.infoList.OrderType}],attrs:{span:e.HeadSpan}},[e._v(e._s(e._f("OrderFilte")(e.infoList.OrderType)))]),e._v(" "),e.infoList.UsersID?i("el-col",{staticClass:"table-cell",attrs:{span:e.HeadSpan}},[e._v(e._s(e.infoList.UsersID))]):e._e(),e._v(" "),e.infoList.PickupTime?i("el-col",{staticClass:"table-cell",attrs:{span:e.HeadSpan}},[e._v(e._s(e._f("TimeFilte")(e.infoList.PickupTime)))]):e._e()],1)],1),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("svg-icon",{staticStyle:{color:"#606266"},attrs:{"icon-class":"marker"}}),e._v(" "),i("span",{staticClass:"font-small"},[e._v("商品信息")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"orderLineTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.ordList,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{label:"序列号",align:"center",type:"index",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{label:"商品编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.GoodsID))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品图片",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("img",{attrs:{src:e.row.GoodsImg,height:"80",width:"80"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.GoodsName))]),e._v(" "),i("p")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"属性",align:"center",width:"240px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.MappingList,function(t,n){return i("div",{key:n,staticStyle:{"text-align":"left"}},[i("span",{staticStyle:{color:"red"}},[e._v(e._s(t.name)+":")]),e._v(" "),e._l(t.GoodsValueList,function(t,n){return i("div",{key:n},[e._v("\n                    "+e._s(t.GoodsValueName)+"; 条码："+e._s(t.SerialNumber)+"\n                ")])})],2)})}}])}),e._v(" "),i("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{class:{"color-danger":0==t.row.Status,"color-success":1==t.row.Status,"color-main":2==t.row.Status,"color-warning":3==t.row.Status}},[e._v("\n             "+e._s(e._f("formatLineStatus")(t.row.Status))+"\n          ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.Notes))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"供货价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v("￥"+e._s(t.row.SupplyPrice))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"订单数量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.GoodsCount))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"实际退货数量",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editCount||1!=t.row.Status?i("span",[e._v(e._s(e._f("getPercentage")(t.row.DeliverCount)))]):e._e(),e._v(" "),e.editCount||1!=t.row.Status?e._e():i("el-input-number",{attrs:{min:0,max:t.row.GoodsCount,label:"num"},on:{change:e.handleChange,blur:function(i){e.HandleBlur(t.row)}},model:{value:t.row.DeliverCount,callback:function(i){e.$set(t.row,"DeliverCount",i)},expression:"scope.row.DeliverCount"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"未退金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(e._f("getPercentage")((t.row.GoodsCount-t.row.DeliverCount)*t.row.SupplyPrice)))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"退款金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(e._f("getPercentage")(t.row.DeliverCount*t.row.SupplyPrice)))]}}])})],1),e._v(" "),i("div",[i("div",{staticStyle:{float:"right",margin:"20px 0 20px 0"}},[e._v("\n\n        供货商退款金额合计：\n        "),i("span",{staticClass:"color-danger"},[e._v("￥"+e._s(e._f("getPercentage")(e.totleMoney)))]),e._v(" "),i("span",{staticClass:"padT"}),e._v(" 实际退货总数：\n        "),i("span",{staticClass:"color-danger"},[e._v(e._s(e._f("getPercentage")(e.allCount)))])])]),e._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:20,offset:4}},[i("div",{staticStyle:{float:"right"}},[i("div",{staticStyle:{"padding-top":"15px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.excelExp()}}},[e._v("导出")]),e._v(" "),i("el-button",{directives:[{name:"print",rawName:"v-print",value:"#orderDelivery",expression:"'#orderDelivery'"}],attrs:{type:"primary"}},[e._v("打印")])],1)])])],1),e._v(" "),i("div")],1),e._v(" "),i("el-dialog",{attrs:{title:"修改收货人信息",visible:e.receiverDialogVisible,width:"40%"},on:{"update:visible":function(t){e.receiverDialogVisible=t}}},[i("el-form",{ref:"receiverInfoForm",attrs:{model:e.receiverInfo,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"收货人姓名："}},[i("el-input",{staticStyle:{width:"200px"},attrs:{onkeyup:"this.value=value.replace(/\\s+/g, '')",onafterpaste:"this.value=value.replace(/\\s+/g, '')"},model:{value:e.receiverInfo.RcName,callback:function(t){e.$set(e.receiverInfo,"RcName",t)},expression:"receiverInfo.RcName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号码："}},[i("el-input",{staticStyle:{width:"200px"},attrs:{onkeyup:"this.value=this.value.replace(/\\D/g,'')",onafterpaste:"this.value=this.value.replace(/\\D/g,'')"},model:{value:e.receiverInfo.RcPhone,callback:function(t){e.$set(e.receiverInfo,"RcPhone",t)},expression:"receiverInfo.RcPhone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所在区域："}},[i("v-distpicker",{attrs:{province:e.receiverInfo.receiverProvince,city:e.receiverInfo.receiverCity,area:e.receiverInfo.receiverRegion},on:{selected:e.onSelectRegion}})],1),e._v(" "),i("el-form-item",{attrs:{label:"详细地址："}},[i("el-input",{attrs:{onkeyup:"this.value=value.replace(/\\s+/g, '')",onafterpaste:"this.value=value.replace(/\\s+/g, '')",type:"textarea",rows:"3"},model:{value:e.receiverInfo.RcAddr,callback:function(t){e.$set(e.receiverInfo,"RcAddr",t)},expression:"receiverInfo.RcAddr"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.receiverDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateReceiverInfo}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改费用信息",visible:e.moneyDialogVisible,width:"40%"},on:{"update:visible":function(t){e.moneyDialogVisible=t}}},[i("div",{staticClass:"table-layout"},[i("el-row",[i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("商品合计")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("运费")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("优惠券")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("积分抵扣")])],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"table-cell",attrs:{span:6}},[e._v("￥"+e._s(e.order.totalAmount))]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:6}},[i("el-input",{attrs:{size:"mini"},model:{value:e.moneyInfo.freightAmount,callback:function(t){e.$set(e.moneyInfo,"freightAmount",e._n(t))},expression:"moneyInfo.freightAmount"}},[i("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:6}},[e._v("-￥"+e._s(e.order.couponAmount))]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:6}},[e._v("-￥"+e._s(e.order.integrationAmount))])],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("活动优惠")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("折扣金额")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("订单总金额")]),e._v(" "),i("el-col",{staticClass:"table-cell-title",attrs:{span:6}},[e._v("应付款金额")])],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"table-cell",attrs:{span:6}},[e._v("-￥"+e._s(e.order.promotionAmount))]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:6}},[i("el-input",{attrs:{size:"mini"},model:{value:e.moneyInfo.discountAmount,callback:function(t){e.$set(e.moneyInfo,"discountAmount",e._n(t))},expression:"moneyInfo.discountAmount"}},[i("template",{slot:"prepend"},[e._v("-￥")])],2)],1),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:6}},[i("span",{staticClass:"color-danger"},[e._v("￥"+e._s(e.order.totalAmount+e.moneyInfo.freightAmount))])]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:6}},[i("span",{staticClass:"color-danger"},[e._v("￥"+e._s(e.order.payAmount+e.moneyInfo.freightAmount-e.moneyInfo.discountAmount))])])],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.moneyDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateMoneyInfo}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"关闭订单",visible:e.closeDialogVisible,width:"40%"},on:{"update:visible":function(t){e.closeDialogVisible=t}}},[i("el-form",{attrs:{model:e.closeInfo,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"操作备注："}},[i("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.closeInfo.note,callback:function(t){e.$set(e.closeInfo,"note",t)},expression:"closeInfo.note"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.closeDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleCloseOrder}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"备注订单",visible:e.markOrderDialogVisible,width:"40%"},on:{"update:visible":function(t){e.markOrderDialogVisible=t}}},[i("el-form",{attrs:{model:e.markInfo,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"操作备注："}},[i("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.markInfo.note,callback:function(t){e.$set(e.markInfo,"note",t)},expression:"markInfo.note"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.markOrderDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleMarkOrder}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _=i("VU/8")(h,g,!1,function(e){i("C0rv")},"data-v-81a8432e",null);t.default=_.exports}});
//# sourceMappingURL=12.151e9d7ef537705609131560476466300.js.map